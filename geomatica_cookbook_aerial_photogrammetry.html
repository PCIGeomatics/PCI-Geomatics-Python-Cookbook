<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Digital Aerial Photogrammetry &mdash; Geomatica Cookbook 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="top" title="Geomatica Cookbook 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Generic Geometric Correction" href="geomatica_cookbook_generic_geometric_correction.html" />
    <link rel="prev" title="Satellite Photogrammetry" href="geomatica_cookbook_satellite_photogrammetry.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="geomatica_cookbook_generic_geometric_correction.html" title="Generic Geometric Correction"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="geomatica_cookbook_satellite_photogrammetry.html" title="Satellite Photogrammetry"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Geomatica Cookbook 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="digital-aerial-photogrammetry">
<h1><strong>Digital Aerial Photogrammetry</strong><a class="headerlink" href="#digital-aerial-photogrammetry" title="Permalink to this headline">¶</a></h1>
<p>This section provides some basic recipes for importing pci libraries, accessing help, error handling and etc.</p>
<div class="section" id="create-pix-link-file-from-raw-aerial-images">
<h2>Create .pix Link File from Raw Aerial Images<a class="headerlink" href="#create-pix-link-file-from-raw-aerial-images" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This recipe shows how to create a .pix live link file from raw aerial imagery.
This creates the .pix file format for an image, without having to copy the actual
pixels. Rather it links back to the .tif image. The pix format is highly recommended
for photogrammetric processing with Geomatica functions.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pci.link</span> <span class="kn">import</span> <span class="n">link</span>

<span class="n">raw_airphoto</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto_project\raw_images\00025.tif&quot;</span>
<span class="n">pix_link_file</span> <span class="o">=</span> <span class="s">r&quot;c:\airpoto_project\ingested\00025.pix&quot;</span>

<span class="n">link</span><span class="p">(</span> <span class="n">raw_airphoto</span><span class="p">,</span> <span class="n">pix_link_file</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="discover-all-airphotos-in-a-directory-and-create-pix-link-file-batch-processing">
<h2>Discover all airphotos in a directory and create .pix link file - <strong>Batch Processing</strong><a class="headerlink" href="#discover-all-airphotos-in-a-directory-and-create-pix-link-file-batch-processing" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This recipe demonstrates how to automatically discover all valid raw airphotos and then create a .pix link
file for them so that they can be run through Geomatica&#8217;s photogrammetric processing chain.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">raw_airphoto_dir</span> <span class="o">=</span><span class="s">r&quot;c:\airphoto_project\raw_images&quot;</span>

<span class="n">input_files_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">raw_airphoto_dir</span><span class="p">):</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s">&quot;*.tif&quot;</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;found valid input file: &quot;</span><span class="p">,</span> <span class="nb">file</span>
        <span class="n">input_files_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="nb">file</span><span class="p">))</span>

<span class="c">#Create Link file</span>
<span class="k">for</span> <span class="n">raw_image</span> <span class="ow">in</span> <span class="n">input_files_list</span><span class="p">:</span>
    <span class="n">input_file</span> <span class="o">=</span> <span class="n">raw_image</span>
    <span class="n">ingest_dir</span> <span class="o">=</span> <span class="s">r&quot;c:\airpoto_project\ingested&quot;</span>
    <span class="n">link_pix</span> <span class="o">=</span> <span class="n">ingested_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="n">ntpath</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">raw_image</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;.pix&quot;</span>

    <span class="n">link</span><span class="p">(</span> <span class="nb">input</span><span class="p">,</span> <span class="n">link_pix</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="setup-digital-airphoto-project-for-photogrammetric-processing">
<h2>Setup Digital Airphoto Project for Photogrammetric Processing<a class="headerlink" href="#setup-digital-airphoto-project-for-photogrammetric-processing" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This recipe demonstrates how to setup an orthoengine project for airphoto photogrammetric processing.
The results of running this recipe will setup a project that is ready for DEM extraction and orthorectification</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pci.link</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.crproj</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.camimport</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.eoimport</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">raw_airphoto_dir</span> <span class="o">=</span><span class="s">r&quot;c:\airphoto_project\raw_images&quot;</span>

<span class="n">input_files_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">raw_airphoto_dir</span><span class="p">):</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s">&quot;*.tif&quot;</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;found valid input file: &quot;</span><span class="p">,</span> <span class="nb">file</span>
        <span class="n">input_files_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="nb">file</span><span class="p">))</span>

<span class="c">#Create Link file</span>
<span class="k">for</span> <span class="n">raw_image</span> <span class="ow">in</span> <span class="n">input_files_list</span><span class="p">:</span>
    <span class="n">input_file</span> <span class="o">=</span> <span class="n">raw_image</span>
    <span class="n">ingest_dir</span> <span class="o">=</span> <span class="s">r&quot;c:\airpoto_project\ingested&quot;</span>
    <span class="n">link_pix</span> <span class="o">=</span> <span class="n">ingested_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="n">ntpath</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">raw_image</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;.pix&quot;</span>

    <span class="n">link</span><span class="p">(</span> <span class="nb">input</span><span class="p">,</span> <span class="n">link_pix</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>

<span class="c">#Create OrthoEngine project file</span>
<span class="n">mfile</span> <span class="o">=</span> <span class="n">ingest_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;*.pix&quot;</span>
<span class="n">oeproj</span> <span class="o">=</span> <span class="n">ingest_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;oe_initial.prj&quot;</span>
<span class="n">mapunits</span> <span class="o">=</span> <span class="s">&quot;UTM 17 D122&quot;</span>

<span class="n">crproj</span><span class="p">(</span> <span class="n">mfile</span><span class="p">,</span> <span class="p">[],</span> <span class="n">oeproj</span><span class="p">,</span> <span class="s">&quot;APDU&quot;</span><span class="p">,</span> <span class="n">mapunits</span> <span class="p">)</span>

<span class="c">#Import Camera Parameters</span>
<span class="n">camfile</span> <span class="o">=</span> <span class="n">raw_airphoto_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;camera_calib.xml&quot;</span>
<span class="n">prepared_oe_proj</span> <span class="o">=</span> <span class="n">ingest_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;oe_configured.prj&quot;</span>

<span class="n">camimport</span><span class="p">(</span> <span class="n">oeproj</span><span class="p">,</span> <span class="n">camfile</span><span class="p">,</span> <span class="n">prepared_oe_proj</span> <span class="p">)</span>

<span class="c">#Import Exterior Orientation File</span>
<span class="n">eofile</span> <span class="o">=</span> <span class="n">raw_airphoto_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;eo.txt&quot;</span>
<span class="n">mapunits</span> <span class="o">=</span> <span class="s">&quot;UTM 17 D122&quot;</span> <span class="c">#D122 is NAD83</span>

<span class="n">eoimport</span><span class="p">(</span> <span class="n">prepared_oe_proj</span><span class="p">,</span> <span class="n">eofile</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">mapunits</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span> <span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="automatic-dem-extraction-from-aerial-imagery-batch-processing">
<h2>Automatic DEM Extraction from Aerial Imagery - <strong>Batch Processing</strong><a class="headerlink" href="#automatic-dem-extraction-from-aerial-imagery-batch-processing" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This recipe demonstrates how to extract a DEM from multiple Aerial images, using an orthoengine project
that was previously setup for digital aerial processing (See above recipe)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pci.cpmmseg</span> <span class="kn">import</span> <span class="n">cpmmseg</span>
<span class="kn">from</span> <span class="nn">pci.epipolar2</span> <span class="kn">import</span> <span class="n">epipolar2</span>
<span class="kn">from</span> <span class="nn">pci.autodem2</span> <span class="kn">import</span> <span class="n">autodem2</span>
<span class="kn">from</span> <span class="nn">pci.dsm2dtm</span> <span class="kn">import</span> <span class="n">dsm2dtm</span>

<span class="c">#Create math model from OE to ingested images</span>
<span class="n">ingest_airphoto_dir</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\ingests&quot;</span>
<span class="n">prepared_oe_proj</span> <span class="o">=</span> <span class="n">ingest_airphoto_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;oe_configured.prj&quot;</span>

<span class="n">ingest_image_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">ingest_airphoto_dir</span><span class="p">):</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s">&quot;*.tif&quot;</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;found valid input file: &quot;</span><span class="p">,</span> <span class="nb">file</span>
        <span class="n">ingest_image_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="nb">file</span><span class="p">))</span>

<span class="k">for</span> <span class="n">ingest_image</span> <span class="ow">in</span> <span class="n">ingest_image_list</span><span class="p">:</span>
    <span class="n">oeproj</span> <span class="o">=</span> <span class="n">final_oe_proj</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">ingest_image</span>

    <span class="n">cpmmseg</span><span class="p">(</span><span class="n">oeproj</span><span class="p">,</span> <span class="nb">file</span><span class="p">,</span> <span class="p">[])</span>

<span class="c">#Generate Epipolar Images from Stereo pairs</span>
<span class="n">epi_outdir</span> <span class="o">=</span> <span class="n">work_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&#39;epipolars&#39;</span>

<span class="n">epipolar2</span><span class="p">(</span> <span class="n">ingest_airphoto_dir</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="s">u&quot;opt&quot;</span><span class="p">,</span> <span class="p">[],</span>
           <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">epi_outdir</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1024</span><span class="p">]</span> <span class="p">)</span>

<span class="c">#Extract Digital Surface Model (DSM) from multiple stereo airphoto images and mosaic them together</span>
<span class="n">dsm_outdir</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\dsm_working&quot;</span>
<span class="n">deocoded_sm</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\dsm_working\airphoto_dsm.pix&quot;</span>
<span class="n">pxszout</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">]</span>

<span class="n">autodem2</span><span class="p">(</span> <span class="n">epi_outdir</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&#39;high&#39;</span><span class="p">,</span> <span class="s">&#39;hilly&#39;</span><span class="p">,</span> <span class="s">&#39;32r&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s">&#39;yes&#39;</span><span class="p">,</span>
          <span class="s">&#39;no&#39;</span><span class="p">,</span> <span class="s">&#39;no&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">outdir</span><span class="p">,</span> <span class="n">dsm</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;UTM 17 D122&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="n">pxszout</span><span class="p">,</span> <span class="s">&#39;blend&#39;</span> <span class="p">)</span>

<span class="c">#convert DSM to DEM (Automatically remove surface features such as trees and buildings from DSM)</span>
<span class="n">dem_file</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\dem\airphoto_dem.pix&quot;</span>
<span class="n">feature_size</span> <span class="o">=</span> <span class="p">[</span><span class="mi">250</span><span class="p">]</span>
<span class="n">gradient</span> <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">]</span>
<span class="n">remove_bumps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">fill_pits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">smooth_dem</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">]</span>

<span class="n">dsm2dtm</span><span class="p">(</span> <span class="n">geocoded_dsm</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">dem_file</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">feature_size</span><span class="p">,</span> <span class="n">gradient</span><span class="p">,</span> <span class="s">&quot;hilly&quot;</span><span class="p">,</span> <span class="n">remove_bumps</span><span class="p">,</span> <span class="n">fill_pits</span><span class="p">,</span> <span class="n">smooth_dem</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="automatic-orthorectification-of-aerial-imagery">
<h2>Automatic Orthorectification of Aerial Imagery<a class="headerlink" href="#automatic-orthorectification-of-aerial-imagery" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This recipe provides a working example of how to orthorectify multiple airphoto images from multiple
digital aerial images.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pci.cpmmseg</span> <span class="kn">import</span> <span class="n">cpmmseg</span>
<span class="kn">from</span> <span class="nn">pci.ortho2</span> <span class="kn">import</span> <span class="n">ortho2</span>

<span class="c">#Create math model from OE to ingested images</span>
<span class="n">ingest_airphoto</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\ingest\00021.pix&quot;</span>
<span class="n">prepared_oe_proj</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\working\oe_configured.prj&quot;</span>

<span class="n">cpmmseg</span><span class="p">(</span><span class="n">prepared_oe_proj</span><span class="p">,</span> <span class="n">ingest_image</span><span class="p">,</span> <span class="p">[])</span>

<span class="c">#Orthorectify imagery with a user provided DEM</span>
<span class="n">ortho_airphoto</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\orthos\o00021.pix&quot;</span>
<span class="n">x_res</span> <span class="o">=</span> <span class="s">&quot;0.2&quot;</span> <span class="c">#x resolution set to 20cm</span>
<span class="n">y_res</span> <span class="o">=</span> <span class="s">&quot;0.2&quot;</span> <span class="c">#y resolution set to 20cm</span>
<span class="n">dem</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\dem\user_dem.pix&quot;</span>

<span class="n">ortho2</span><span class="p">(</span><span class="n">ingest_airphoto</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">ortho_airphoto</span><span class="p">,</span> <span class="s">&quot;PIX&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
        <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">x_res</span><span class="p">,</span> <span class="n">y_res</span><span class="p">,</span> <span class="n">dem</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="automatic-orthorectification-of-aerial-imagery-batch-processing">
<h2>Automatic Orthorectification of Aerial Imagery - <strong>Batch Processing</strong><a class="headerlink" href="#automatic-orthorectification-of-aerial-imagery-batch-processing" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This recipe provides a working example of how to orthorectify multiple airphoto images.
It assumes you have already computed the math model required to orthorectify the imagery.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pci.cpmmseg</span> <span class="kn">import</span> <span class="n">cpmmseg</span>
<span class="kn">from</span> <span class="nn">pci.ortho2</span> <span class="kn">import</span> <span class="n">ortho2</span>

<span class="n">ingest_airphoto_dir</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\ingests&quot;</span>
<span class="n">prepared_oe_proj</span> <span class="o">=</span> <span class="n">ingest_airphoto_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;oe_configured.prj&quot;</span>

<span class="c">#Copy math model from prepared orthoengine project file to all ingested images</span>
<span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">ingest_airphoto_dir</span><span class="p">):</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s">&quot;*.pix&quot;</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;found valid input file: &quot;</span><span class="p">,</span> <span class="nb">file</span>
        <span class="n">ingest_image</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="nb">file</span><span class="p">))</span>

        <span class="n">cpmmseg</span><span class="p">(</span><span class="n">prepared_oe_proj</span><span class="p">,</span> <span class="n">ingest_image</span><span class="p">,</span> <span class="p">[])</span>

<span class="c">#Orthorectify imagery with a user provided DEM</span>
<span class="n">ortho_dir</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\orthos&quot;</span>
<span class="n">x_res</span> <span class="o">=</span> <span class="s">&quot;0.2&quot;</span> <span class="c">#x resolution set to 20cm</span>
<span class="n">y_res</span> <span class="o">=</span> <span class="s">&quot;0.2&quot;</span> <span class="c">#y resolution set to 20cm</span>
<span class="n">dem</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\dem\user_dem.pix&quot;</span>

<span class="n">ortho2</span><span class="p">(</span><span class="n">ingest_airphoto_dir</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">ortho_dir</span><span class="p">,</span> <span class="s">&quot;PIX&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
        <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">x_res</span><span class="p">,</span> <span class="n">y_res</span><span class="p">,</span> <span class="n">dem</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="digital-aerial-orthorectification-with-user-provided-dem-full-workflow">
<h2>Digital Aerial Orthorectification with user provided DEM - <strong>Full Workflow</strong><a class="headerlink" href="#digital-aerial-orthorectification-with-user-provided-dem-full-workflow" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This is a complete orthorectification workflow for digital aerial imagery (not including DEM extraction).
It combines multiple concepts from the recipes in this section.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pci.link</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.crproj</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.camimport</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.eoimport</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.cpmmseg</span> <span class="kn">import</span> <span class="n">cpmmseg</span>
<span class="kn">from</span> <span class="nn">pci.ortho2</span> <span class="kn">import</span> <span class="n">ortho2</span>

<span class="n">raw_airphoto_dir</span> <span class="o">=</span><span class="s">r&quot;c:\airphoto_project\raw_images&quot;</span>

<span class="n">input_files_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">raw_airphoto_dir</span><span class="p">):</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s">&quot;*.tif&quot;</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;found valid input file: &quot;</span><span class="p">,</span> <span class="nb">file</span>
        <span class="n">input_files_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="nb">file</span><span class="p">))</span>

<span class="c">#Create Link file</span>
<span class="k">for</span> <span class="n">raw_image</span> <span class="ow">in</span> <span class="n">input_files_list</span><span class="p">:</span>
    <span class="n">input_file</span> <span class="o">=</span> <span class="n">raw_image</span>
    <span class="n">ingest_dir</span> <span class="o">=</span> <span class="s">r&quot;c:\airpoto_project\ingested&quot;</span>
    <span class="n">link_pix</span> <span class="o">=</span> <span class="n">ingested_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="n">ntpath</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">raw_image</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;.pix&quot;</span>

    <span class="n">link</span><span class="p">(</span> <span class="nb">input</span><span class="p">,</span> <span class="n">link_pix</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>

<span class="c">#Create OrthoEngine project file</span>
<span class="n">mfile</span> <span class="o">=</span> <span class="n">ingest_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;*.pix&quot;</span>
<span class="n">oeproj</span> <span class="o">=</span> <span class="n">ingest_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;oe_initial.prj&quot;</span>
<span class="n">mapunits</span> <span class="o">=</span> <span class="s">&quot;UTM 17 D122&quot;</span>

<span class="n">crproj</span><span class="p">(</span> <span class="n">mfile</span><span class="p">,</span> <span class="p">[],</span> <span class="n">oeproj</span><span class="p">,</span> <span class="s">&quot;APDU&quot;</span><span class="p">,</span> <span class="n">mapunits</span> <span class="p">)</span>

<span class="c">#Import Camera Parameters</span>
<span class="n">camfile</span> <span class="o">=</span> <span class="n">raw_airphoto_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;camera_calib.xml&quot;</span>
<span class="n">prepared_oe_proj</span> <span class="o">=</span> <span class="n">ingest_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;oe_configured.prj&quot;</span>

<span class="n">camimport</span><span class="p">(</span> <span class="n">oeproj</span><span class="p">,</span> <span class="n">camfile</span><span class="p">,</span> <span class="n">prepared_oe_proj</span> <span class="p">)</span>

<span class="c">#Import Exterior Orientation File</span>
<span class="n">eofile</span> <span class="o">=</span> <span class="n">raw_airphoto_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;eo.txt&quot;</span>
<span class="n">mapunits</span> <span class="o">=</span> <span class="s">&quot;UTM 17 D122&quot;</span> <span class="c">#D122 is NAD83</span>

<span class="n">eoimport</span><span class="p">(</span> <span class="n">prepared_oe_proj</span><span class="p">,</span> <span class="n">eofile</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">mapunits</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span> <span class="p">)</span>

<span class="c">#Copy math model from prepared orthoengine project file to all ingested images</span>
<span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">ingest_dir</span><span class="p">):</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s">&quot;*.pix&quot;</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;found valid input file: &quot;</span><span class="p">,</span> <span class="nb">file</span>
        <span class="n">ingest_image</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="nb">file</span><span class="p">))</span>

        <span class="n">cpmmseg</span><span class="p">(</span><span class="n">prepared_oe_proj</span><span class="p">,</span> <span class="n">ingest_image</span><span class="p">,</span> <span class="p">[])</span>

<span class="c">#Orthorectify imagery with a user provided DEM</span>
<span class="n">ortho_dir</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\orthos&quot;</span>
<span class="n">x_res</span> <span class="o">=</span> <span class="s">&quot;0.2&quot;</span> <span class="c">#x resolution set to 20cm</span>
<span class="n">y_res</span> <span class="o">=</span> <span class="s">&quot;0.2&quot;</span> <span class="c">#y resolution set to 20cm</span>
<span class="n">dem</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\dem\user_dem.pix&quot;</span>

<span class="n">ortho2</span><span class="p">(</span><span class="n">ingest_dir</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">ortho_dir</span><span class="p">,</span> <span class="s">&quot;PIX&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
        <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">x_res</span><span class="p">,</span> <span class="n">y_res</span><span class="p">,</span> <span class="n">dem</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="digital-aerial-orthorectification-with-dem-extraction-full-workflow">
<h2>Digital Aerial Orthorectification with DEM Extraction - <strong>Full Workflow</strong><a class="headerlink" href="#digital-aerial-orthorectification-with-dem-extraction-full-workflow" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This is a complete orthorectification workflow for digital aerial imagery (including DEM extraction).
It combines multiple concepts from the recipes in this section.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pci.link</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.crproj</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.camimport</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.eoimport</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.cpmmseg</span> <span class="kn">import</span> <span class="n">cpmmseg</span>
<span class="kn">from</span> <span class="nn">pci.ortho2</span> <span class="kn">import</span> <span class="n">ortho2</span>

<span class="n">raw_airphoto_dir</span> <span class="o">=</span><span class="s">r&quot;c:\airphoto_project\raw_images&quot;</span>

<span class="n">input_files_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">raw_airphoto_dir</span><span class="p">):</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s">&quot;*.tif&quot;</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;found valid input file: &quot;</span><span class="p">,</span> <span class="nb">file</span>
        <span class="n">input_files_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="nb">file</span><span class="p">))</span>

<span class="c">#Create Link file</span>
<span class="k">for</span> <span class="n">raw_image</span> <span class="ow">in</span> <span class="n">input_files_list</span><span class="p">:</span>
    <span class="n">input_file</span> <span class="o">=</span> <span class="n">raw_image</span>
    <span class="n">ingest_dir</span> <span class="o">=</span> <span class="s">r&quot;c:\airpoto_project\ingested&quot;</span>
    <span class="n">link_pix</span> <span class="o">=</span> <span class="n">ingested_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="n">ntpath</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">raw_image</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;.pix&quot;</span>

    <span class="n">link</span><span class="p">(</span> <span class="nb">input</span><span class="p">,</span> <span class="n">link_pix</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>

<span class="c">#Create OrthoEngine project file</span>
<span class="n">mfile</span> <span class="o">=</span> <span class="n">ingest_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;*.pix&quot;</span>
<span class="n">oeproj</span> <span class="o">=</span> <span class="n">ingest_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;oe_initial.prj&quot;</span>
<span class="n">mapunits</span> <span class="o">=</span> <span class="s">&quot;UTM 17 D122&quot;</span>

<span class="n">crproj</span><span class="p">(</span> <span class="n">mfile</span><span class="p">,</span> <span class="p">[],</span> <span class="n">oeproj</span><span class="p">,</span> <span class="s">&quot;APDU&quot;</span><span class="p">,</span> <span class="n">mapunits</span> <span class="p">)</span>

<span class="c">#Import Camera Parameters</span>
<span class="n">camfile</span> <span class="o">=</span> <span class="n">raw_airphoto_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;camera_calib.xml&quot;</span>
<span class="n">prepared_oe_proj</span> <span class="o">=</span> <span class="n">ingest_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;oe_configured.prj&quot;</span>

<span class="n">camimport</span><span class="p">(</span> <span class="n">oeproj</span><span class="p">,</span> <span class="n">camfile</span><span class="p">,</span> <span class="n">prepared_oe_proj</span> <span class="p">)</span>

<span class="c">#Import Exterior Orientation File</span>
<span class="n">eofile</span> <span class="o">=</span> <span class="n">raw_airphoto_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;eo.txt&quot;</span>
<span class="n">mapunits</span> <span class="o">=</span> <span class="s">&quot;UTM 17 D122&quot;</span> <span class="c">#D122 is NAD83</span>

<span class="n">eoimport</span><span class="p">(</span> <span class="n">prepared_oe_proj</span><span class="p">,</span> <span class="n">eofile</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">mapunits</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span> <span class="p">)</span>

<span class="c">#Create math model from OE to ingested images</span>
<span class="n">ingest_image_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">ingest_dir</span><span class="p">):</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s">&quot;*.pix&quot;</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;found valid input file: &quot;</span><span class="p">,</span> <span class="nb">file</span>
        <span class="n">ingest_image_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="nb">file</span><span class="p">))</span>

<span class="k">for</span> <span class="n">ingest_image</span> <span class="ow">in</span> <span class="n">ingest_image_list</span><span class="p">:</span>
    <span class="n">cpmmseg</span><span class="p">(</span><span class="n">prepared_oe_proj</span><span class="p">,</span> <span class="n">ingest_image</span><span class="p">,</span> <span class="p">[])</span>

<span class="c">#Generate Epipolar Images from Stereo pairs</span>
<span class="n">epi_outdir</span> <span class="o">=</span> <span class="n">work_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&#39;epipolars&#39;</span>

<span class="n">epipolar2</span><span class="p">(</span> <span class="n">ingest_dir</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="s">u&quot;opt&quot;</span><span class="p">,</span> <span class="p">[],</span>
           <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">epi_outdir</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1024</span><span class="p">]</span> <span class="p">)</span>

<span class="c">#Extract Digital Surface Model (DSM) from multiple stereo airphoto images and mosaic them together</span>
<span class="n">dsm_outdir</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\dsm_working&quot;</span>
<span class="n">deocoded_sm</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\dsm_working\airphoto_dsm.pix&quot;</span>
<span class="n">pxszout</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">]</span>

<span class="n">autodem2</span><span class="p">(</span> <span class="n">epi_outdir</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&#39;high&#39;</span><span class="p">,</span> <span class="s">&#39;hilly&#39;</span><span class="p">,</span> <span class="s">&#39;32r&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s">&#39;yes&#39;</span><span class="p">,</span>
          <span class="s">&#39;no&#39;</span><span class="p">,</span> <span class="s">&#39;no&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">outdir</span><span class="p">,</span> <span class="n">dsm</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;UTM 17 D122&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="n">pxszout</span><span class="p">,</span> <span class="s">&#39;blend&#39;</span> <span class="p">)</span>

<span class="c">#convert DSM to DEM (Automatically remove surface features such as trees and buildings from DSM)</span>
<span class="n">dem_file</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\dem\airphoto_dem.pix&quot;</span>
<span class="n">feature_size</span> <span class="o">=</span> <span class="p">[</span><span class="mi">250</span><span class="p">]</span>
<span class="n">gradient</span> <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">]</span>
<span class="n">remove_bumps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">fill_pits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">smooth_dem</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">]</span>

<span class="n">dsm2dtm</span><span class="p">(</span> <span class="n">geocoded_dsm</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">dem_file</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">feature_size</span><span class="p">,</span> <span class="n">gradient</span><span class="p">,</span> <span class="s">&quot;hilly&quot;</span><span class="p">,</span> <span class="n">remove_bumps</span><span class="p">,</span> <span class="n">fill_pits</span><span class="p">,</span> <span class="n">smooth_dem</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>

<span class="c">#Orthorectify imagery with a user provided DEM</span>
<span class="n">ortho_dir</span> <span class="o">=</span> <span class="s">r&quot;c:\airphoto\orthos&quot;</span>
<span class="n">x_res</span> <span class="o">=</span> <span class="s">&quot;0.2&quot;</span> <span class="c">#x resolution set to 20cm</span>
<span class="n">y_res</span> <span class="o">=</span> <span class="s">&quot;0.2&quot;</span> <span class="c">#y resolution set to 20cm</span>

<span class="n">ortho2</span><span class="p">(</span><span class="n">ingest_airphoto_dir</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">ortho_dir</span><span class="p">,</span> <span class="s">&quot;PIX&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
        <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">x_res</span><span class="p">,</span> <span class="n">y_res</span><span class="p">,</span> <span class="n">dem_file</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="create-camera-calibration-xml-file">
<h2>Create Camera Calibration (.xml) file<a class="headerlink" href="#create-camera-calibration-xml-file" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This recipe demonstrates how to quickly create a camera calibration file in the XML format
required by Geomatica&#8217;s automated aerial processing algorithms</p>
<p>Note: It really is not necessary to use this block of code. Just simply create your own camera
calibration file before running the script by copying the block after <strong>Create Camera Calibration
XML file</strong> section and save it as an xml file.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>

<span class="c">#Set camera calibration location</span>
<span class="n">cam_dir</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the directory for the Camera Calibration file: &quot;</span><span class="p">)</span>
<span class="n">cam_file</span> <span class="o">=</span> <span class="n">cam_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;camera_calib.xml&quot;</span>
<span class="n">target</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">cam_file</span><span class="p">,</span> <span class="s">&#39;w+&#39;</span><span class="p">)</span>

<span class="c">#Get Camera Calibration Values</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">cam_sensor</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;What Camera Sensor are you using (UltraCam/DMC/Other)? &quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">cam_sensor</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;ultracam&quot;</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Progressing to UltraCam setup mode...&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">cam_sensor</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;dmc&quot;</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Progressing to DMC setup mode...&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">cam_sensor</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;other&quot;</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Progressing to generic camera setup mode...&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Your answer could not be verified. Please respond with: ultracam, dmc or other&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">if</span> <span class="n">cam_sensor</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;ultracam&quot;</span><span class="p">:</span>
    <span class="n">focal_length</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the focal length in mm: &quot;</span><span class="p">)</span>
    <span class="n">sym_ppx</span> <span class="o">=</span>  <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the principal Point offset x: &quot;</span><span class="p">)</span>
    <span class="n">sym_ppy</span> <span class="o">=</span>  <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the principal Point offset y: &quot;</span><span class="p">)</span>
    <span class="n">chip_width</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the chip size width in mm: &quot;</span><span class="p">)</span>
    <span class="n">chip_length</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the chip size length in mm: &quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">cam_sensor</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;dmc&quot;</span><span class="p">:</span>
    <span class="n">focal_length</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the focal length in mm: &quot;</span><span class="p">)</span>
    <span class="n">chip_width</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the chip size width in mm: &quot;</span><span class="p">)</span>
    <span class="n">chip_length</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the chip size length in mm: &quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">focal_length</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the focal length in mm: &quot;</span><span class="p">)</span>
    <span class="n">sym_ppx</span> <span class="o">=</span>  <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the principal Point offset x: &quot;</span><span class="p">)</span>
    <span class="n">sym_ppy</span> <span class="o">=</span>  <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the principal Point offset y: &quot;</span><span class="p">)</span>
    <span class="n">chip_width</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the chip size width in mm: &quot;</span><span class="p">)</span>
    <span class="n">chip_length</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Please provide the chip size length in mm: &quot;</span><span class="p">)</span>

    <span class="n">radial_distortion</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Do you have radial distortion values? (y/n)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">radial_distortion</span> <span class="o">==</span> <span class="s">&quot;y&quot;</span><span class="p">:</span>
        <span class="n">rldc_r0</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide RLDC R0 value: &quot;</span><span class="p">)</span>
        <span class="n">rldc_r1</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide RLDC R1 value: &quot;</span><span class="p">)</span>
        <span class="n">rldc_r2</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide RLDC R2 value: &quot;</span><span class="p">)</span>
        <span class="n">rldc_r3</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide RLDC R3 value: &quot;</span><span class="p">)</span>
        <span class="n">rldc_r4</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide RLDC R4 value: &quot;</span><span class="p">)</span>
        <span class="n">rldc_r5</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide RLDC R5 value: &quot;</span><span class="p">)</span>
        <span class="n">rldc_r6</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide RLDC R6 value: &quot;</span><span class="p">)</span>
        <span class="n">rldc_r7</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide RLDC R7 value: &quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Setting radial coefficients to 0 (zero)&quot;</span>
        <span class="n">rldc_r0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rldc_r1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rldc_r2</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rldc_r3</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rldc_r4</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rldc_r5</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rldc_r6</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rldc_r7</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">decentering_distortion</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Do you have decentering distortion values? (y/n)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">decentering_distortion</span> <span class="o">==</span> <span class="s">&quot;y&quot;</span><span class="p">:</span>
        <span class="n">ddc_p1</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide DDC P1 value: &quot;</span><span class="p">)</span>
        <span class="n">ddc_p2</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide DDC P2 value: &quot;</span><span class="p">)</span>
        <span class="n">ddc_p3</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide DDC P3 value: &quot;</span><span class="p">)</span>
        <span class="n">ddc_p4</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;please provide DDC P4 value: &quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Setting decentering coefficients to 0 (zero)&quot;</span>
        <span class="n">ddc_p1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ddc_p2</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ddc_p3</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ddc_p4</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c">#Create Camera Calibration XML file</span>

<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;CAMERA NAME=</span><span class="se">\&quot;</span><span class="s">&quot;</span> <span class="o">+</span> <span class="n">cam_sensor</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;LENS_SERIAL/&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;CALIB_SOURCE/&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;CALIB_DATE/&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;FL&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">focal_length</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/FL&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;SYMMETRY PPX=</span><span class="se">\&quot;</span><span class="s">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sym_ppx</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s"> PPY=</span><span class="se">\&quot;</span><span class="s">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sym_ppy</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">/&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;RLDC name=</span><span class="se">\&quot;</span><span class="s">R0</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">rldc_r0</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/RLDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;RLDC name=</span><span class="se">\&quot;</span><span class="s">R1</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">rldc_r1</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/RLDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;RLDC name=</span><span class="se">\&quot;</span><span class="s">R2</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">rldc_r2</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/RLDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;RLDC name=</span><span class="se">\&quot;</span><span class="s">R3</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">rldc_r3</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/RLDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;RLDC name=</span><span class="se">\&quot;</span><span class="s">R4</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">rldc_r4</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/RLDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;RLDC name=</span><span class="se">\&quot;</span><span class="s">R5</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">rldc_r5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/RLDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;RLDC name=</span><span class="se">\&quot;</span><span class="s">R6</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">rldc_r6</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/RLDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;RLDC name=</span><span class="se">\&quot;</span><span class="s">R7</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">rldc_r7</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/RLDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;DDC name=</span><span class="se">\&quot;</span><span class="s">P1</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ddc_p1</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/DDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;DDC name=</span><span class="se">\&quot;</span><span class="s">P2</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ddc_p2</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/DDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;DDC name=</span><span class="se">\&quot;</span><span class="s">P3</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ddc_p3</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/DDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;DDC name=</span><span class="se">\&quot;</span><span class="s">P4</span><span class="se">\&quot;</span><span class="s">&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ddc_p4</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&lt;/DDC&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;DIGITAL&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;CHIP_SIZE WIDTH=</span><span class="se">\&quot;</span><span class="s">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">chip_width</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s"> HEIGHT=</span><span class="se">\&quot;</span><span class="s">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">chip_length</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">/&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;YSCALE&gt;1.000&lt;/YSCALE&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;/DIGITAL&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;/CAMERA&gt;&quot;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;&quot;</span>
<span class="k">print</span> <span class="s">&quot;completed writing Camera Calibration file&quot;</span>
<span class="k">print</span> <span class="s">&quot;&quot;</span>
<span class="k">print</span> <span class="s">&quot;Camera calibration file located here: &quot;</span> <span class="o">+</span> <span class="n">cam_file</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><strong>Digital Aerial Photogrammetry</strong></a><ul>
<li><a class="reference internal" href="#create-pix-link-file-from-raw-aerial-images">Create .pix Link File from Raw Aerial Images</a></li>
<li><a class="reference internal" href="#discover-all-airphotos-in-a-directory-and-create-pix-link-file-batch-processing">Discover all airphotos in a directory and create .pix link file - <strong>Batch Processing</strong></a></li>
<li><a class="reference internal" href="#setup-digital-airphoto-project-for-photogrammetric-processing">Setup Digital Airphoto Project for Photogrammetric Processing</a></li>
<li><a class="reference internal" href="#automatic-dem-extraction-from-aerial-imagery-batch-processing">Automatic DEM Extraction from Aerial Imagery - <strong>Batch Processing</strong></a></li>
<li><a class="reference internal" href="#automatic-orthorectification-of-aerial-imagery">Automatic Orthorectification of Aerial Imagery</a></li>
<li><a class="reference internal" href="#automatic-orthorectification-of-aerial-imagery-batch-processing">Automatic Orthorectification of Aerial Imagery - <strong>Batch Processing</strong></a></li>
<li><a class="reference internal" href="#digital-aerial-orthorectification-with-user-provided-dem-full-workflow">Digital Aerial Orthorectification with user provided DEM - <strong>Full Workflow</strong></a></li>
<li><a class="reference internal" href="#digital-aerial-orthorectification-with-dem-extraction-full-workflow">Digital Aerial Orthorectification with DEM Extraction - <strong>Full Workflow</strong></a></li>
<li><a class="reference internal" href="#create-camera-calibration-xml-file">Create Camera Calibration (.xml) file</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="geomatica_cookbook_satellite_photogrammetry.html"
                        title="previous chapter"><strong>Satellite Photogrammetry</strong></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="geomatica_cookbook_generic_geometric_correction.html"
                        title="next chapter"><strong>Generic Geometric Correction</strong></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/geomatica_cookbook_aerial_photogrammetry.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="geomatica_cookbook_generic_geometric_correction.html" title="Generic Geometric Correction"
             >next</a> |</li>
        <li class="right" >
          <a href="geomatica_cookbook_satellite_photogrammetry.html" title="Satellite Photogrammetry"
             >previous</a> |</li>
        <li><a href="index.html">Geomatica Cookbook 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, Shawn Melamed.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b1.
    </div>
  </body>
</html>