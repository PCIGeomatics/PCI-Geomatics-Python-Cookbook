<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Data Transformations &mdash; Geomatica Cookbook 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="css/default.css" type="text/css" />
    <link rel="stylesheet" href="css/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/underscore.js"></script>
    <script type="text/javascript" src="js/doctools.js"></script>
    <script type="text/javascript" src="js/sidebar.js"></script>
    <link rel="top" title="Geomatica Cookbook 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Geospatial Image Processing" href="geomatica_cookbook_image_processing.html" />
    <link rel="prev" title="Files &amp; Layers" href="geomatica_cookbook_files_layers.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="geomatica_cookbook_image_processing.html" title="Geospatial Image Processing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="geomatica_cookbook_files_layers.html" title="Files &amp; Layers"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Geomatica Cookbook 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="data-transformations">
<h1><strong>Data Transformations</strong><a class="headerlink" href="#data-transformations" title="Permalink to this headline">¶</a></h1>
<p>This section provides some basic recipes for importing pci libraries, accessing help, error handling and etc.</p>
<div class="section" id="convert-bitmap-to-vector-line-and-polygon-layers">
<h2>Convert bitmap to vector line and polygon layers<a class="headerlink" href="#convert-bitmap-to-vector-line-and-polygon-layers" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Python prints help documentation to the terminal/console for the specified function. This includes information
about the signature of the function (arguments that need to be passed) and information about what the function
does. Furthermore, the help document includes information about what input data is required and what output is
produced.</p>
<p>It is best to access this directly with the python interpreter in Geomatica&#8217;s Focus or using a terminal/console</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pci.bit2line</span> <span class="kn">import</span> <span class="n">bit2line</span>
<span class="kn">from</span> <span class="nn">pci.bit2poly</span> <span class="kn">import</span> <span class="n">bit2poly</span>

<span class="c">#Set input bitmap file and layer</span>
<span class="n">bitmap_file</span> <span class="o">=</span> <span class="s">r&quot;c:\input\bitmap.pix&quot;</span>
<span class="n">bitmap_layer</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span>


<span class="c">#Convert bitmap to vector lines</span>
<span class="n">output_line</span> <span class="o">=</span> <span class="s">r&quot;c:\output\lines.pix&quot;</span>
<span class="n">smooth_lines</span> <span class="o">=</span> <span class="s">&quot;Yes&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;pix&quot;</span>

<span class="n">bit2line</span><span class="p">(</span><span class="n">bitmap_file</span><span class="p">,</span> <span class="n">bitmap_layer</span><span class="p">,</span> <span class="n">output_line</span><span class="p">,</span> <span class="s">&quot;YES&quot;</span><span class="p">,</span> <span class="n">smooth_lines</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>


<span class="c">#Convert bitmap to vector polygons</span>
<span class="n">output_poly</span> <span class="o">=</span> <span class="s">r&quot;c:\output\polygon_shp\polygons.shp&quot;</span>
<span class="n">smooth_poly</span> <span class="o">=</span> <span class="s">&quot;Yes&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;shp&quot;</span> <span class="c">#output will be an ArcGIS shapefile</span>

<span class="n">bit2poly</span><span class="p">(</span><span class="n">bitmap_file</span><span class="p">,</span> <span class="n">bitmap_layer</span><span class="p">,</span> <span class="n">output_poly</span><span class="p">,</span> <span class="n">smooth_poly</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="convert-raster-to-vector-line-polygon-point-and-raster-bitmap">
<h2>Convert Raster to vector line, polygon, point and raster bitmap<a class="headerlink" href="#convert-raster-to-vector-line-polygon-point-and-raster-bitmap" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This example demonstrates how to handle exceptions that may result from incorrectly invoking a Geomatica
function. The main behaviour of this action is that the script will continue to run if the exception is called.
This is mainly desirable when performing batch operations, so that if one file fails to run, the script will continue
to process the other files</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pci.ras2line</span> <span class="kn">import</span> <span class="n">ras2line</span>
<span class="kn">from</span> <span class="nn">pci.ras2poly</span> <span class="kn">import</span> <span class="n">ras2poly</span>
<span class="kn">from</span> <span class="nn">pci.ras2pnt</span> <span class="kn">import</span> <span class="n">ras2pnt</span>
<span class="kn">from</span> <span class="nn">pci.ras2bit</span> <span class="kn">import</span> <span class="n">ras2bit</span>
<span class="kn">from</span> <span class="nn">pci.ra2thmr</span> <span class="kn">import</span> <span class="n">thmr</span>

<span class="c">#Set input raster file and layer</span>
<span class="n">raster_file</span> <span class="o">=</span> <span class="s">r&quot;c:\input\bitmap.pix&quot;</span>
<span class="n">raster_chan</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>


<span class="c">#Convert raster channel to vector lines</span>
<span class="n">output_line</span> <span class="o">=</span> <span class="s">r&quot;c:\output\ras2lines.pix&quot;</span>
<span class="n">smooth_line</span> <span class="o">=</span> <span class="s">&quot;Yes&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;pix&quot;</span>

<span class="n">ras2line</span><span class="p">(</span><span class="n">raster_file</span><span class="p">,</span> <span class="n">raster_chan</span><span class="p">,</span> <span class="n">output_line</span><span class="p">,</span> <span class="s">&quot;yes&quot;</span><span class="p">,</span> <span class="n">smooth_line</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">foptions</span><span class="p">)</span>


<span class="c">#Convert raster channel to vector polygons</span>
<span class="n">output_poly</span> <span class="o">=</span> <span class="s">r&quot;c:\output\ras2poly.shp&quot;</span>
<span class="n">smooth_poly</span> <span class="o">=</span> <span class="s">&quot;Yes&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;shp&quot;</span> <span class="c">#output will be an ArcGIS shapefile</span>

<span class="n">ras2poly</span><span class="p">(</span><span class="n">raster_file</span><span class="p">,</span> <span class="n">raster_chan</span><span class="p">,</span> <span class="n">output_poly</span><span class="p">,</span> <span class="n">smooth_poly</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>


<span class="c">#Convert raster channel to vector points</span>
<span class="n">output_points</span> <span class="o">=</span> <span class="s">r&quot;c:\output\ras2pnts.pix&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;shp&quot;</span>

<span class="n">ras2pnt</span><span class="p">(</span><span class="n">raster_file</span><span class="p">,</span> <span class="n">raster_chan</span><span class="p">,</span> <span class="n">output_points</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>


<span class="c">#Convert raster channel to bitmap</span>
<span class="n">output_bitmap</span> <span class="o">=</span> <span class="s">r&quot;c:\output\ras2bitmap.shp&quot;</span>
<span class="n">smooth_poly</span> <span class="o">=</span> <span class="s">&quot;Yes&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;pix&quot;</span>

<span class="n">ras2bit</span><span class="p">(</span><span class="n">raster_file</span><span class="p">,</span> <span class="n">raster_chan</span><span class="p">,</span> <span class="n">output_bitmap</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="convert-vector-line-layer-to-vector-polygons-vector-points-and-raster">
<h2>Convert vector line layer to vector polygons, vector points and raster<a class="headerlink" href="#convert-vector-line-layer-to-vector-polygons-vector-points-and-raster" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This example demonstrates how to handle exceptions that may result from incorrectly invoking a Geomatica
function. The main behaviour of this action is that the script will continue to run if the exception is called.
This is mainly desirable when performing batch operations, so that if one file fails to run, the script will continue
to process the other files</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pci.line2poly</span> <span class="kn">import</span> <span class="n">line2poly</span>
<span class="kn">from</span> <span class="nn">pci.line2pnt</span> <span class="kn">import</span> <span class="n">line2pnt</span>
<span class="kn">from</span> <span class="nn">pci.line2ras</span> <span class="kn">import</span> <span class="n">line2ras</span>

<span class="c">#Set input vector line file and layer</span>
<span class="n">line_file</span> <span class="o">=</span> <span class="s">r&quot;c:\input\line.shp&quot;</span>
<span class="n">line_layer</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>


<span class="c">#Convert vector line to vector polygon</span>
<span class="n">output_poly</span> <span class="o">=</span> <span class="s">r&quot;c:\output\polygons\line2poly.shp&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;shp&quot;</span>

<span class="n">line2poly</span><span class="p">(</span><span class="n">line_file</span><span class="p">,</span> <span class="n">line_layer</span><span class="p">,</span> <span class="n">output_poly</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>


<span class="c">#convert vector line to vector points</span>
<span class="n">output_points</span> <span class="o">=</span> <span class="s">r&quot;c:\output\line2points.pix&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;pix&quot;</span>
<span class="n">convert_mthd</span> <span class="o">=</span> <span class="s">&quot;vertices&quot;</span> <span class="c">#a unique point is placed on each vertex of each line</span>

<span class="n">line2pnt</span><span class="p">(</span><span class="n">line_file</span><span class="p">,</span> <span class="n">line_layer</span><span class="p">,</span> <span class="n">output_points</span><span class="p">,</span> <span class="n">convert_mthd</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>


<span class="c">#convert vector line to raster (burns values where the line exists into raster cells)</span>
<span class="n">output_raster</span> <span class="o">=</span> <span class="s">r&quot;c:\output\line2ras.pix&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;pix&quot;</span>
<span class="n">attr_field</span> <span class="o">=</span> <span class="s">&quot;Num_of_lanes&quot;</span> <span class="c">#intersecting raster cells will be assigned a value based on the number of lanes in the road</span>
<span class="n">connect</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="c">#connect lines using all directions including diagonals</span>
<span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c">#output raster set to 1m pixel resolution</span>

<span class="n">line2ras</span><span class="p">(</span><span class="n">line_file</span><span class="p">,</span> <span class="n">line_layer</span><span class="p">,</span> <span class="n">output_raster</span><span class="p">,</span> <span class="p">[],</span> <span class="n">attr_field</span><span class="p">,</span> <span class="p">[],</span> <span class="n">connect</span><span class="p">,</span>
         <span class="n">res</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="convert-vector-polygon-layer-to-vector-lines-points-raster-bitmap-layer-and-image-raster">
<h2>Convert vector polygon layer to vector lines, points, raster bitmap layer and image raster<a class="headerlink" href="#convert-vector-polygon-layer-to-vector-lines-points-raster-bitmap-layer-and-image-raster" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This example demonstrates how to handle exceptions that may result from incorrectly invoking a Geomatica
function. The main behaviour of this action is that the script will continue to run if the exception is called.
This is mainly desirable when performing batch operations, so that if one file fails to run, the script will continue
to process the other files</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pci.poly2line</span> <span class="kn">import</span> <span class="n">poly2line</span>
<span class="kn">from</span> <span class="nn">pci.poly2pnt</span> <span class="kn">import</span> <span class="n">poly2pnt</span>
<span class="kn">from</span> <span class="nn">pci.poly2bit</span> <span class="kn">import</span> <span class="n">poly2bit</span>
<span class="kn">from</span> <span class="nn">pci.poly2ras</span> <span class="kn">import</span> <span class="n">poly2ras</span>

<span class="c">#Set input vector polygon file and layer</span>
<span class="n">poly_file</span> <span class="o">=</span> <span class="s">r&quot;c:\input\poly.pix&quot;</span>
<span class="n">poly_layer</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span>


<span class="c">#Convert vector polygons to vector lines</span>
<span class="n">output_line</span> <span class="o">=</span> <span class="s">r&quot;c:\output\polygons\poly2line.shp&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;shp&quot;</span>

<span class="n">poly2line</span><span class="p">(</span><span class="n">poly_file</span><span class="p">,</span> <span class="n">poly_layer</span><span class="p">,</span> <span class="n">output_line</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>


<span class="c">#convert vector polygons to vector points (does not create centroid, search cookbook for &quot;centroid&quot;)</span>
<span class="n">output_points</span> <span class="o">=</span> <span class="s">r&quot;c:\output\poly2points.pix&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;pix&quot;</span>

<span class="n">poly2pnt</span><span class="p">(</span><span class="n">poly_file</span><span class="p">,</span> <span class="n">poly_layer</span><span class="p">,</span> <span class="n">output_points</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>


<span class="c">#convert vector polygons to a bitmap</span>
<span class="n">output_bitmap</span> <span class="o">=</span> <span class="s">r&quot;c:\output\poly2bitmap.pix&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;pix&quot;</span>
<span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="n">poly2bit</span><span class="p">(</span><span class="n">poly_file</span><span class="p">,</span> <span class="n">poly_layer</span><span class="p">,</span> <span class="n">output_bitmap</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>


<span class="c">#convert vector line to raster (burns values where the polygon exists into raster cells)</span>
<span class="n">output_raster</span> <span class="o">=</span> <span class="s">r&quot;c:\output\poly2ras.pix&quot;</span>
<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;pix&quot;</span>
<span class="n">raster_type</span> <span class="o">=</span> <span class="s">&quot;Thematic Raster&quot;</span>
<span class="n">attr_field</span> <span class="o">=</span> <span class="s">&quot;Num_of_lanes&quot;</span> <span class="c">#land use class number</span>
<span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c">#output raster set to 1m pixel resolution</span>


<span class="n">poly2ras</span><span class="p">(</span><span class="n">poly_file</span><span class="p">,</span> <span class="n">poly_layer</span><span class="p">,</span> <span class="n">output_raster</span><span class="p">,</span> <span class="p">[],</span> <span class="n">raster_type</span><span class="p">,</span>
         <span class="n">attr_field</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="automatically-collect-gcp-points-and-convert-to-chip-database-partial-workflow">
<h2>Automatically collect GCP points and convert to Chip Database - <strong>Partial Workflow</strong><a class="headerlink" href="#automatically-collect-gcp-points-and-convert-to-chip-database-partial-workflow" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This example demonstrates how to handle exceptions that may result from incorrectly invoking a Geomatica
function. The main behaviour of this action is that the script will continue to run if the exception is called.
This is mainly desirable when performing batch operations, so that if one file fails to run, the script will continue
to process the other files</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pci.link</span> <span class="kn">import</span> <span class="n">link</span>
<span class="kn">from</span> <span class="nn">pci.autogcp2</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.gcprefn</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#Create Link File to hold new GCP segment(s)</span>
<span class="n">raw_geoeye_image</span> <span class="o">=</span> <span class="s">r&quot;C:\geoeye\RAWDATA\po_311159_0000000\po_000000_bgrn_0000000.tif&quot;</span>
<span class="n">link_pix_file</span> <span class="o">=</span> <span class="s">r&quot;C:\geoeye\pix_link\po_311159_0000000\po_311159_bgrn_0000000.pix&quot;</span>

<span class="n">link</span><span class="p">(</span> <span class="n">raw_geoeye_image</span><span class="p">,</span> <span class="n">link_pix_file</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>

<span class="c">#Run GCP Collection and store new GCP segment in link pix file</span>
<span class="n">raw_match_chan</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span>       <span class="c">#When available NIR channel is recommended</span>
<span class="n">reference_image</span> <span class="o">=</span> <span class="s">r&quot;C:\geoeye\reference\reference_image.pix&quot;</span>
<span class="n">ref_match_chan</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="n">dem</span> <span class="o">=</span> <span class="s">r&quot;C:\geoeye\reference\dem_file.pix&quot;</span>
<span class="n">gcp_search_radius</span> <span class="o">=</span> <span class="p">[</span><span class="mi">50</span><span class="p">]</span>

<span class="n">gcp_seg</span> <span class="o">=</span> <span class="n">autogcp2</span><span class="p">(</span><span class="n">link_pix_file</span><span class="p">,</span> <span class="n">raw_match_chan</span><span class="p">,</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="n">reference_image</span><span class="p">,</span> <span class="n">ref_match_chan</span><span class="p">,</span> <span class="n">dem</span><span class="p">,</span>
                <span class="p">[],</span> <span class="p">[],</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="n">gcp_search_radius</span><span class="p">,</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">u&quot;&quot;</span><span class="p">,</span> <span class="p">[])</span>

<span class="c">#autogcp2 function returns the new gcp segment, which can then be directly passed to the gcp refinement function</span>

<span class="c">#Setup required parameters for automatic GCP refinement</span>
<span class="n">model_type</span> <span class="o">=</span> <span class="s">u&quot;RF&quot;</span>    <span class="c">#rational function model is often best for newer sensors with good RPCs</span>
<span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>           <span class="c">#a polynomial order of 0 is best for most DigitalGlobe sensors (due to very accurate RPCs)</span>
<span class="n">reject</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">]</span>  <span class="c">#Continue to reject worse GCPs until RMSE falls below 0.5 pixel in x and y directions</span>

<span class="n">gcprefn</span><span class="p">(</span><span class="n">link_pix_file</span><span class="p">,</span> <span class="p">[</span><span class="n">gcp_seg</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="n">model_type</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">reject</span><span class="p">,</span> <span class="s">u&quot;NO&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[])</span>

<span class="c">#accurate GCPs should now be stored in the link pix file</span>

<span class="c">#convert GCPs to chip database</span>
<span class="n">chip_chans</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">chipDB_file</span> <span class="o">=</span> <span class="s">r&quot;C:\geoeye\reference\chipDatabase\chips.cdb&quot;</span>

<span class="n">pnt2chip</span><span class="p">(</span><span class="n">link_pix_file</span><span class="p">,</span> <span class="n">chip_chans</span><span class="p">,</span> <span class="p">[],</span> <span class="n">link_pix_file</span><span class="p">,</span> <span class="p">[</span><span class="n">gcp_seg</span><span class="p">],</span>
         <span class="n">chipDB_file</span><span class="p">,</span> <span class="s">&quot;geoeye&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="n">dem</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[])</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="create-raster-dem-from-vector-elevation-layers">
<h2>Create raster DEM from vector elevation layers<a class="headerlink" href="#create-raster-dem-from-vector-elevation-layers" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Quickly check to ensure that Geomatica is correctly installed and licensed for your computer.
Use the Python interpreter in the terminal/console for quickly checking the install and licensing.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pci.vdemingest</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.vdemsetup</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.vdemint</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#ingests the LIDAR point cloud (.las) into a working format (.pix)</span>
<span class="n">lidar_point_cloud</span> <span class="o">=</span> <span class="s">r&quot;C:\input_lidar\lidar_cloud.las&quot;</span>
<span class="n">lidar_return</span> <span class="o">=</span> <span class="s">&quot;RETURNALL&quot;</span> <span class="c">#uses all lidar returns in the .las file</span>
<span class="n">pix_vector</span> <span class="o">=</span> <span class="s">r&quot;C:\working_lidar\lidar_vector.pix&quot;</span> <span class="c">#output .pix vector file</span>
<span class="n">map_units</span>    <span class="o">=</span> <span class="s">&quot;UTM 17 D000&quot;</span>

<span class="n">vdemingest</span><span class="p">(</span> <span class="n">lidar_point_cloud</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">lidar_return</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
            <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">pix_vector</span><span class="p">,</span> <span class="n">map_units</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>


<span class="c">#setup the vector files for interpolation into a raster DEM</span>
<span class="n">indexfil</span> <span class="o">=</span> <span class="s">r&quot;C:\working_lidar\lidar_vector.pix&quot;</span>   <span class="c"># output index file, used by VDEMINT</span>
<span class="n">dem_res</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>

<span class="n">vdemsetup</span><span class="p">(</span> <span class="n">lidar_point_cloud</span><span class="p">,</span> <span class="n">indexfil</span><span class="p">,</span> <span class="s">&quot;PIX&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
           <span class="n">dem_res</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span> <span class="p">)</span>


<span class="c">#interpolate the LIDAR point cloud</span>
<span class="n">dem_file</span> <span class="o">=</span> <span class="s">r&quot;C:\output_dem\dem_fromLIDAR.pix&quot;</span>
<span class="n">maxiter</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">]</span> <span class="c"># max 20 smoothing iterations</span>
<span class="n">memsize</span><span class="o">=</span> <span class="p">[</span><span class="mi">2048</span><span class="p">]</span> <span class="c"># use 2048 MB (~2GB) of memory</span>

<span class="n">vdemint</span><span class="p">(</span> <span class="nb">file</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[],</span> <span class="n">pix_vector</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">maxiter</span><span class="p">,</span> <span class="n">memsize</span> <span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="create-raster-dem-from-lidar-points-las">
<h2>Create raster DEM from LIDAR points (.las)<a class="headerlink" href="#create-raster-dem-from-lidar-points-las" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Quickly check to ensure that Geomatica is correctly installed and licensed for your computer.
Use the Python interpreter in the terminal/console for quickly checking the install and licensing.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pci.vdemingest</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.vdemsetup</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pci.vdemint</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#ingests the LIDAR point cloud (.las) into a working format (.pix)</span>
<span class="n">lidar_point_cloud</span> <span class="o">=</span> <span class="s">r&quot;C:\input_lidar\lidar_cloud.las&quot;</span>
<span class="n">lidar_return</span> <span class="o">=</span> <span class="s">&quot;RETURNALL&quot;</span> <span class="c">#uses all lidar returns in the .las file</span>
<span class="n">pix_vector</span> <span class="o">=</span> <span class="s">r&quot;C:\working_lidar\lidar_vector.pix&quot;</span> <span class="c">#output .pix vector file</span>
<span class="n">map_units</span>    <span class="o">=</span> <span class="s">&quot;UTM 17 D000&quot;</span>

<span class="n">vdemingest</span><span class="p">(</span> <span class="n">lidar_point_cloud</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">lidar_return</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
            <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">pix_vector</span><span class="p">,</span> <span class="n">map_units</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>


<span class="c">#setup the vector files for interpolation into a raster DEM</span>
<span class="n">indexfil</span> <span class="o">=</span> <span class="s">r&quot;C:\working_lidar\lidar_vector.pix&quot;</span>   <span class="c"># output index file, used by VDEMINT</span>
<span class="n">dem_res</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>

<span class="n">vdemsetup</span><span class="p">(</span> <span class="n">lidar_point_cloud</span><span class="p">,</span> <span class="n">indexfil</span><span class="p">,</span> <span class="s">&quot;PIX&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
           <span class="n">dem_res</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span> <span class="p">)</span>


<span class="c">#interpolate the LIDAR point cloud</span>
<span class="n">dem_file</span> <span class="o">=</span> <span class="s">r&quot;C:\output_dem\dem_fromLIDAR.pix&quot;</span>
<span class="n">maxiter</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">]</span> <span class="c"># max 20 smoothing iterations</span>
<span class="n">memsize</span><span class="o">=</span> <span class="p">[</span><span class="mi">2048</span><span class="p">]</span> <span class="c"># use 2048 MB (~2GB) of memory</span>

<span class="n">vdemint</span><span class="p">(</span> <span class="nb">file</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[],</span> <span class="n">pix_vector</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">maxiter</span><span class="p">,</span> <span class="n">memsize</span> <span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="generate-contours-from-raster-dem">
<h2>Generate contours from raster DEM<a class="headerlink" href="#generate-contours-from-raster-dem" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This example demonstrates how to handle exceptions that may result from incorrectly invoking a Geomatica
function. The main behaviour of this action is that the script will continue to run if the exception is called.
This is mainly desirable when performing batch operations, so that if one file fails to run, the script will continue
to process the other files</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pci.contour</span> <span class="kn">import</span> <span class="n">contour</span>

<span class="n">dem_file</span> <span class="o">=</span> <span class="s">r&quot;c:\dem\extracted_dem.pix&quot;</span>
<span class="n">elev_chan</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">output_contour_layer</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">contour_interval</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="mi">10</span><span class="n">m</span> <span class="n">intervals</span> <span class="n">between</span> <span class="n">contour</span> <span class="n">lines</span>
<span class="n">dem_no_data</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">32768</span><span class="p">]</span> <span class="c">#no data value set for inptu DEM</span>
<span class="n">contour_field</span> <span class="o">=</span> <span class="s">&quot;Elevation&quot;</span>

<span class="n">contour</span><span class="p">(</span><span class="n">dem_file</span><span class="p">,</span> <span class="n">elev_chan</span><span class="p">,</span> <span class="p">[],</span> <span class="n">output_contour_layer</span><span class="p">,</span>
        <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">contour_interval</span><span class="p">,</span> <span class="n">backval</span><span class="p">,</span> <span class="n">contour_field</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><strong>Data Transformations</strong></a><ul>
<li><a class="reference internal" href="#convert-bitmap-to-vector-line-and-polygon-layers">Convert bitmap to vector line and polygon layers</a></li>
<li><a class="reference internal" href="#convert-raster-to-vector-line-polygon-point-and-raster-bitmap">Convert Raster to vector line, polygon, point and raster bitmap</a></li>
<li><a class="reference internal" href="#convert-vector-line-layer-to-vector-polygons-vector-points-and-raster">Convert vector line layer to vector polygons, vector points and raster</a></li>
<li><a class="reference internal" href="#convert-vector-polygon-layer-to-vector-lines-points-raster-bitmap-layer-and-image-raster">Convert vector polygon layer to vector lines, points, raster bitmap layer and image raster</a></li>
<li><a class="reference internal" href="#automatically-collect-gcp-points-and-convert-to-chip-database-partial-workflow">Automatically collect GCP points and convert to Chip Database - <strong>Partial Workflow</strong></a></li>
<li><a class="reference internal" href="#create-raster-dem-from-vector-elevation-layers">Create raster DEM from vector elevation layers</a></li>
<li><a class="reference internal" href="#create-raster-dem-from-lidar-points-las">Create raster DEM from LIDAR points (.las)</a></li>
<li><a class="reference internal" href="#generate-contours-from-raster-dem">Generate contours from raster DEM</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="geomatica_cookbook_files_layers.html"
                        title="previous chapter"><strong>Files &amp; Layers</strong></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="geomatica_cookbook_image_processing.html"
                        title="next chapter"><strong>Geospatial Image Processing</strong></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/geomatica_cookbook_data_transforms.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="geomatica_cookbook_image_processing.html" title="Geospatial Image Processing"
             >next</a> |</li>
        <li class="right" >
          <a href="geomatica_cookbook_files_layers.html" title="Files &amp; Layers"
             >previous</a> |</li>
        <li><a href="index.html">Geomatica Cookbook 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, Shawn Melamed.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b1.
    </div>
  </body>
</html>